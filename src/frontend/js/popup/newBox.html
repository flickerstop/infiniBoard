<!----------------------------------------------------------
> CSS
<----------------------------------------------------------->
<style>
    #popup-box{
        height: 400px;
        width: 700px;
    }

    #popup-title-bar{
        width: 100%;
        height: 40px;
        line-height: 40px;
        text-align: center;
        font-size: 20px;
        margin-bottom: 20px;
    }

    .popup-input-title{
        font-size: 10px;
        margin-left: 20px;
    }

    .popup-input{
        margin-left: 20px;
        margin-right: 20px;
        height: 40px;
        font-size: 20px;
        width: calc(100% - 40px);
        padding: 0px 5px;
        box-sizing: border-box;

        margin-bottom: 10px;
    }

    .popup-nextButton{
        position: absolute;
        bottom: 10px;
        right: 100px;
        border: 2px solid var(--blue);
        color: var(--blue);
        width: 100px;
        height: 40px;
        line-height: 40px;
        border-radius: 10px;
        text-align: center
    }

    .popup-nextButton:hover{
        cursor: pointer;
        border: 2px solid var(--text);
        color: var(--text);
    }

    .popup-info{
        font-family: 'Roboto', sans-serif;
        margin-left: 20px;
        margin-right: 20px;
        font-size: 15px;
        width: calc(100% - 40px);
    }

    .popup-rightPanel{
        position: absolute;
        width: 300px;
        height: 100%;
        left: 400px;
    }

    .popup-leftPanel{
        position: absolute;
        top:0px;
        left: 0px;
        width: 399px;
        height: 100%;
        border-right: 1px solid var(--sidebar);
        float: left;
    }

    .popup-picture{
        height: 200px;
        width: 200px;
        margin: 20px auto;
        background-size: 200px 200px;
        background-repeat: no-repeat;
        background-position: center center;
    }

    .popup-svg{
        height: 200px;
        width: 350px;
        margin: 20px 25px;
        border: 1px solid var(--sidebar);
    }

    
</style>

<!----------------------------------------------------------
> HTML
<----------------------------------------------------------->
<!-- #region -->
<div id="popup-leftPanel1" class="popup-leftPanel">
    <div class="popup-picture" style="background-image: url('./images/box.png')">

    </div>
    <div class="popup-info">
        An Inifinibox stores all your Infiniboards that are linked together. An Infiniboard cannot be linked to another Infiniboard that is stored inside a different Infinibox. The name you choose for the Infinibox should be based around the topic of all the Infiniboards inside.
    </div>
</div>

<div id="popup-nameYourBox" class="popup-rightPanel">
    <div id="popup-title-bar">
        Create a new Infinibox
    </div>
    <div class="popup-input-title" style="margin-top: 120px">
        Infinibox Name:
    </div>
    <input class="popup-input" placeholder="Name of the InfiniBox" >

    <div class="popup-nextButton" onclick="switchPanel(1)">Next -></div>
</div>

<!-----
> Panel 2
<------>

<div id="popup-leftPanel2" class="popup-leftPanel" style="left: 700px">
    <div class="popup-picture" style="background-image: url('./images/board.png')">

    </div>
    <div class="popup-info">
        And Infiniboard is normal whiteboard with additional features. You are able to scroll as much as you want in any direction so your notes can expand as much as you want! You can also create additional boards and have links between them!
    </div>
</div>

<div id="popup-nameYourBoard" style="left: 1100px" class="popup-rightPanel">
    <div id="popup-title-bar">
        The first Infiniboard
    </div>
    <div class="popup-input-title" style="margin-top: 120px">
        Infiniboard Name:
    </div>
    <input class="popup-input" placeholder="Name of the InfiniBoard" >

    <div class="popup-nextButton" onclick="switchPanel(2)">Next -></div>
</div>


<!-----
> Panel 3
<------>


<div id="popup-leftPanel3" class="popup-leftPanel" style="left: 700px">
    <svg class="popup-svg">

    </svg>
    <div class="popup-info">
        Each Infiniboard can have a different background, this is just the background of the first one. Choosing a special background will help with organizing your board.
    </div>
</div>

<div id="popup-pickYourBackground" style="left: 1100px" class="popup-rightPanel">
    <div id="popup-title-bar">
        The first Background
    </div>
    <div class="popup-input-title" style="margin-top: 60px">
        Background type:
    </div>
    <select class="popup-input">
        <option>Solid Colour</option>
        <option>Square Dot Grid</option>
        <option>Triangle Dot Grid</option>
        <option>Hexagon Dot Grid</option>
        <option>Solid Horizontal Lines</option>
        <option>Solid Vertical Lines</option>
        <option>Square Grid</option>
        <option>Triangle Grid</option>
        <option>Hexagon Grid</option>
        <option>Music Lines</option>
    </select>

    <div class="popup-nextButton" onclick="switchToCreateBoard()">Next -></div>
</div>

<!-- #endregion -->

<!----------------------------------------------------------
> JAVASCRIPT
<----------------------------------------------------------->

<script>


    function initPopup(callback){
        console.log(callback);
        d3.select("#popup").style("display",null);
    }

    /**
     * Submit the given information if it passes checks
     */
    function submit(){
        let boxName = util.getValueId("popup-boardBoxName");
        let boardName = util.getValueId("popup-boardName");
        let bgcolor = util.getValueId("popup-colorPicker");
        // Make sure they wrote a name
        if(boxName == ""){
            d3.select("#popup-boardBoxName").style("background-color","#c0392b");
            d3.select("#popup-error").html("Please Write a Name for this Infiniboard Box!");
            return;
        }
        if(boardName == ""){
            d3.select("#popup-boardName").style("background-color","#c0392b");
            d3.select("#popup-error").html("Please Write a Name for the first Infiniboard!");
            return;
        }
        // Check if the name is already used
        if(boxManager.checkBoxNameUsed(boxName)){ 
            d3.select("#popup-boardBoxName").style("background-color","#c0392b");
            d3.select("#popup-error").html("This name is already in use!");
            return;
        }

        // Clear the key event for the enter key
        keyManager.clearEvent(13,0);
        // Turn off the popup
        d3.select("#popup").style("display","none");
        // Clear the popup
        d3.select("#popup-box").html(null);
        callback(boxName,boardName,bgcolor);
    }

    /**
     * Forget all the info given and close the popup
     */
    function closePopup(){
        d3.select("#popup-box").html(null);
        d3.select("#popup").style("display","none");
        keyManager.clearEvent(13,0);
    }

    function switchPanel(panel){
        if(panel == 1){
            d3.select("#popup-nameYourBox").transition().duration(1000).style("opacity",0).style("left","-300px");
            d3.select("#popup-leftPanel1").transition().duration(1000).style("opacity",0).style("left","-700px");
            d3.select("#popup-nameYourBoard").transition().duration(1000).style("left","400px");
            d3.select("#popup-leftPanel2").transition().duration(1000).style("left","0px");
        }else if(panel == 2){
            d3.select("#popup-nameYourBoard").transition().duration(1000).style("opacity",0).style("left","-300px");
            d3.select("#popup-leftPanel2").transition().duration(1000).style("opacity",0).style("left","-700px");
            d3.select("#popup-pickYourBackground").transition().duration(1000).style("left","400px");
            d3.select("#popup-leftPanel3").transition().duration(1000).style("left","0px");
        }
        
    }
</script>